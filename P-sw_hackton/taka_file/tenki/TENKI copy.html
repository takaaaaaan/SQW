<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDAMkNqy8UIL4xN40FbTVE5zYC0ucq8Mtw"></script>
    <title>気圧配置図</title>
</head>

<body>
    <div id="map" style="height: 800px; width: 100%;"></div>
    <script>
        const api_key = "1ce37932b6a194f3b844890fe3a6241d";
        const ranges = {
            '한국주변': { 'lat': [28.16, 40.95], 'lon': [117.01, 142.72] },
            //'제주도 ': { 'lat': [31.0, 34.50], 'lon': [121.8, 129.3] },
            //'동중국해(제주도 아래)': { 'lat': [28.0, 31.0], 'lon': [122.0, 130.0] },
            //'황해 1': { 'lat': [34.5, 35.8], 'lon': [120.1, 126.20] },
            //'황해 2': { 'lat': [35.8, 36.8], 'lon': [121.1, 126.50] },
            //'동해 아래 1': { 'lat': [37.3, 41.5], 'lon': [128.8, 138.5] },
            //'동해 아래 2': { 'lat': [35.4, 41.5], 'lon': [130.5, 135.5] },
            //'동해 위': { 'lat': [41.5, 42.5], 'lon': [130.2, 139.5] },
            //'후쿠오카 한국': { 'lat': [33.58, 34.84], 'lon': [127.78, 130.26] },
        };
        //40.95853921097219, 117.01596556185164
        //28.163308336703192, 142.72397445988946
        function initMap() {
            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 7,
                center: { lat: 33.5, lng: 126.5 }
            });

            for (const [region, coords] of Object.entries(ranges)) {
                const lat_min = coords['lat'][0];
                const lat_max = coords['lat'][1];
                const lon_min = coords['lon'][0];
                const lon_max = coords['lon'][1];

                for (let lat = lat_min; lat < lat_max; lat += 5) {
                    for (let lon = lon_min; lon < lon_max; lon += 5) {
                        const url = `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${api_key}`;
                        fetch(url)
                            .then(response => response.json())
                            .then(data => {
                                const pressure = data['main']['pressure'];
                                let color;
                                if (pressure >= 1040) color = 'navy';
                                else if (pressure >= 1035) color = 'darkblue1';
                                else if (pressure >= 1030) color = 'darkblue2';
                                else if (pressure >= 1025) color = 'blue1';
                                else if (pressure >= 1020) color = 'blue2';
                                else if (pressure >= 1015) color = 'lightblue1';
                                else if (pressure >= 1010) color = 'lightblue2';
                                else if (pressure >= 1005) color = 'aqua1';
                                else if (pressure >= 1000) color = 'aqua2';
                                else if (pressure >= 995) color = 'pink1';
                                else if (pressure >= 990) color = 'pink2';
                                else if (pressure >= 985) color = 'lightcoral1';
                                else if (pressure >= 980) color = 'lightcoral2';
                                else if (pressure >= 975) color = 'red1';
                                else if (pressure >= 970) color = 'red2';
                                else color = 'darkred';

                                new google.maps.Circle({
                                    strokeColor: color,
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: color,
                                    fillOpacity: 0.35,
                                    map: map,
                                    center: { lat: lat, lng: lon },
                                    radius: 5000 // サイズ調整
                                });
                            });
                    }
                }
            }
        }

        initMap();
    </script>
</body>

</html>